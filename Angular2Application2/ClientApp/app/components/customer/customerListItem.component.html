<p *ngIf="!customer"><em>Loading...</em></p>
<div class="panel-group">
    <div class="panel panel-default">
        <div class="panel-heading">
            <div class="panel-title" *ngFor="let customer of customer">
                <a data-toggle="collapse" href="#customer">Ügyfél adatai</a>
                <button type="button" class="btn btn-primary btn-sm" (click)="editCustomer(customer.customerID)">
                    <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                </button>
            </div>
            
        </div>
        <div id="customer" class="panel-collapse collapse in" aria-expanded="true">
            <div class="panel-body">
                <table class='table' *ngIf="customer">
                    <thead>
                        <tr>
                            <th>Vezetéknév</th>
                            <th>Keresztnév</th>
                            <th>Telefonszám</th>
                            <!--<th>ServiceIncidences</th>-->
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let customer of customer">
                            <td>{{ customer.lastName }}</td>
                            <td>{{ customer.firstName}}</td>
                            <td>{{ customer.phoneNumber }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!--<div class="panel-footer">Panel Footer</div>-->
        </div>
    </div>
</div>
<div *ngFor="let customer of customer">
    <div class="panel-group">
        <div class="panel panel-default">
            <div class="panel-heading">
                <span class="panel-title">
                    <a data-toggle="collapse" href="#cars">Ügyfél járművei</a>
                </span>
                <button type="button" class="btn btn-primary btn-sm" (click)="addCar(customer.customerID)">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Új jármű
                </button>
            </div>
            <div id="cars" class="panel-collapse collapse in" aria-expanded="true">
                <div class="panel-body">


                    <div *ngFor="let car of customer.cars">
                        <div class="panel-group">
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#car{{car.carID}}">{{car.carModel.carMake.carMakeName}} {{car.carModel.carModelName}}</a>
                                        <!--Link a szerkesztéshez-->
                                        <button type="button" class="btn btn-primary btn-sm" (click)="editCar(car.carID)">
                                            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                                        </button>
                                        <!--Link az új szervizeseményhez-->
                                        <button type="button" class="btn btn-primary btn-sm" (click)="addNewIncident(car.carID)">
                                            <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Új szervizesemény
                                        </button>

                                    </h4>
                                </div>
                                <div id="car{{car.carID}}" class="panel-collapse collapse" aria-expanded="true">
                                    <div class="panel-body">

                                        <table class="table table-responsive table-hover">
                                            <tbody>
                                                <tr>
                                                    <td>Márka, típus</td>
                                                    <td>{{car.carModel.carMake.carMakeName}} {{car.carModel.carModelName}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Első forgalombahelyezés</td>
                                                    <td>{{car.firstRegistrationDate | date:'yyyy. MM. dd.'}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Műszaki vizsga érvényessége</td>
                                                    <td>{{car.technicalExamDate | date:'yyyy. MM. dd.'}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Rendszám</td>
                                                    <td>{{car.licensePlate}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Alvázszám</td>
                                                    <td>{{car.vin}}</td>
                                                </tr>
                                                <tr>
                                                    <td>Motorszám</td>
                                                    <td>{{car.engineNumber}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        

                                    </div>
                                    <!--<div class="panel-footer">Panel Footer</div>-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>




            </div>

            <!--<div class="panel-footer">Panel Footer</div>-->
        </div>
    </div>
</div>
